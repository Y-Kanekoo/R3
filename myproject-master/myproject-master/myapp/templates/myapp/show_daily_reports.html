<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Daily Reports</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'myapp/css/style.css' %}" />
  </head>
  <body>
        <!-- ナビゲーションバーを挿入 -->
        {% include 'myapp/navbar.html' %}
    <header>
      <h1>日報</h1>
      <nav>
        <ul class="menu">
          <li><a>社員リスト</a></li>
          <li><a>アンケートリスト</a></li>
        </ul>
      </nav>
    </header>

    <table border="1">
      <thead>
        <tr>
          <th><a href="?sort=id&direction={% if current_sort == 'id' and current_direction == 'asc' %}desc{% else %}asc{% endif %}">レポートID</a></th>
          <th><a href="?sort=employee&direction={% if current_sort == 'employee' and current_direction == 'asc' %}desc{% else %}asc{% endif %}">従業員ID</a></th>
          <th><a href="?sort=report_datetime&direction={% if current_sort == 'report_datetime' and current_direction == 'asc' %}desc{% else %}asc{% endif %}">レポート日時</a></th>
          <th><a href="?sort=report_type&direction={% if current_sort == 'report_type' and current_direction == 'asc' %}desc{% else %}asc{% endif %}">レポートタイプ</a></th>
          <th><a href="?sort=created_at&direction={% if current_sort == 'created_at' and current_direction == 'asc' %}desc{% else %}asc{% endif %}">作成日時</a></th>
          <th><a href="?sort=updated_at&direction={% if current_sort == 'updated_at' and current_direction == 'asc' %}desc{% else %}asc{% endif %}">更新日時</a></th>
          {% for question in questionnaires %}
          <th>{{ question.title }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for report in reports %}
        <tr>
          <td>{{ report.id }}</td>
          <td>{{ report.employee }}</td>
          <td>{{ report.report_datetime }}</td>
          <td>{{ report.report_type }}</td>
          <td>{{ report.created_at }}</td>
          <td>{{ report.updated_at }}</td>

          {% for answer in report.answers %}
          <td class="{% if answer.threshold_exceeded %}threshold-exceeded{% endif %}">
            {{ answer.answer }}
          </td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>
